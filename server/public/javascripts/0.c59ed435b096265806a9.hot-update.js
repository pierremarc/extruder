webpackHotUpdate(0,{

/***/ "../lib/ctx-store.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ctx_base__ = __webpack_require__(\"../lib/ctx-base.js\");\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar ContextStore = function (_BaseContext) {\n    _inherits(ContextStore, _BaseContext);\n\n    function ContextStore() {\n        _classCallCheck(this, ContextStore);\n\n        var _this = _possibleConstructorReturn(this, (ContextStore.__proto__ || Object.getPrototypeOf(ContextStore)).call(this));\n\n        Object.defineProperty(_this, 'operations', { value: [] });\n        return _this;\n    }\n\n    _createClass(ContextStore, [{\n        key: 'bezierCurveTo',\n        value: function bezierCurveTo() {\n            this.curveTo.apply(this, arguments);\n        }\n    }, {\n        key: 'quadraticCurveTo',\n        value: function quadraticCurveTo() {\n            this.quadraticTo.apply(this, arguments);\n        }\n    }, {\n        key: 'save',\n        value: function save(op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'restore',\n        value: function restore(op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'begin',\n        value: function begin(op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'moveTo',\n        value: function moveTo(p, op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'lineTo',\n        value: function lineTo(p, op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'cubicTo',\n        value: function cubicTo(c1, c2, p, op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'quadraticTo',\n        value: function quadraticTo(c1, p, op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'closePath',\n        value: function closePath(op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'set',\n        value: function set(k, v, op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'stroke',\n        value: function stroke(op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'fill',\n        value: function fill(op) {\n            this.operations.push(op);\n        }\n    }, {\n        key: 'fillAndStroke',\n        value: function fillAndStroke(op) {\n            this.operations.push(op);\n        }\n    }]);\n\n    return ContextStore;\n}(__WEBPACK_IMPORTED_MODULE_0__ctx_base__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ContextStore;\n\n//////////////////\n// WEBPACK FOOTER\n// ../lib/ctx-store.js\n// module id = ../lib/ctx-store.js\n// module chunks = 0\n\n//# sourceURL=webpack:///../lib/ctx-store.js?");

/***/ }),

/***/ "./tools.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_whatwg_fetch__ = __webpack_require__(\"../node_modules/whatwg-fetch/fetch.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_whatwg_fetch___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_whatwg_fetch__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_ctx_canvas__ = __webpack_require__(\"../lib/ctx-canvas.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__lib_ctx_store__ = __webpack_require__(\"../lib/ctx-store.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__lib_state__ = __webpack_require__(\"../lib/state.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__lib_dom__ = __webpack_require__(\"../lib/dom.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__extrude__ = __webpack_require__(\"./extrude.js\");\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = install;\n\n\n\n\n\n\n\n\nfunction fontName(font) {\n    return font.names.fullName.en;\n}\n\nfunction createfontItem(font) {\n    var name = font.names.fontSubfamily.en;\n    var elem = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('div', { class: 'tool-font-item clickable' });\n    elem.addEventListener('click', function () {\n        var nodeList = document.querySelectorAll('.tool-font-item-selected');\n        var selected = Array.prototype.slice.call(nodeList, 0);\n        selected.forEach(function (node) {\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"f\" /* removeClass */])(node, 'tool-font-item-selected');\n        });\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"g\" /* addClass */])(elem, 'tool-font-item-selected');\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__lib_state__[\"b\" /* setState */])('font', font);\n    });\n    var label = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('span');\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"e\" /* appendText */])(label, name);\n    elem.appendChild(label);\n    return elem;\n}\n\nfunction wrapTool(name, fn) {\n    var box = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('div', {\n        class: 'tool tool-' + name\n    });\n    var title = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('div', {\n        class: 'tool-title'\n    });\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"e\" /* appendText */])(title, name);\n    box.appendChild(title);\n\n    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n    }\n\n    fn.apply(undefined, [box].concat(args));\n    return box;\n}\n\nfunction fontTool(box, fonts) {\n    var groups = {};\n    var getGroup = function getGroup(font) {\n        var family = font.names.fontFamily.en;\n        if (!(family in groups)) {\n            var element = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('div', { class: 'font-family' });\n            var title = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('span', { class: 'font-family-title' });\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"e\" /* appendText */])(title, family);\n            element.appendChild(title);\n            box.appendChild(element);\n            groups[family] = element;\n        }\n        return groups[family];\n    };\n    fonts.forEach(function (font) {\n        var fontItem = createfontItem(font);\n        var group = getGroup(font);\n        group.appendChild(fontItem);\n    });\n}\n\nfunction textTool(box) {\n    var textArea = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('textarea', { class: 'tool-text-area' });\n    var text = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__lib_state__[\"c\" /* getState */])('text');\n    textArea.value = text;\n    textArea.addEventListener('keyup', function () {\n        if (textArea.value !== text) {\n            text = textArea.value;\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__lib_state__[\"b\" /* setState */])('text', text);\n        }\n    });\n    box.appendChild(textArea);\n}\n\nfunction exportTool(box) {\n    var knockout = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('input', {\n        type: 'checkbox',\n        value: 'knockout'\n    });\n\n    var exportPNG = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('a', {\n        class: 'tool-export-button',\n        download: 'extruded.png'\n    });\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"e\" /* appendText */])(exportPNG, 'Download PNG');\n\n    var exportPDF = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('a', {\n        class: 'tool-export-button',\n        htref: '#',\n        download: 'extruded.pdf'\n    });\n\n    box.appendChild(knockout);\n    box.appendChild(exportPNG);\n    box.appendChild(exportPDF);\n\n    var offScreen = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('canvas');\n    var localState = null;\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__lib_state__[\"d\" /* onStateChange */])(function (state) {\n        localState = state;\n    });\n\n    knockout.addEventListener('change', function () {\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__lib_state__[\"b\" /* setState */])('knockout', knockout.checked);\n    });\n\n    exportPNG.addEventListener('mouseenter', function () {\n        if (localState) {\n            offScreen.width = localState.width;\n            offScreen.height = localState.height;\n            var ctx = new __WEBPACK_IMPORTED_MODULE_1__lib_ctx_canvas__[\"a\" /* default */](offScreen);\n            ctx.clear();\n            if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__extrude__[\"a\" /* default */])(ctx, localState)) {\n                exportPNG.href = offScreen.toDataURL('image/png');\n            }\n        }\n    });\n\n    exportPDF.addEventListener('click', function () {\n        if (localState) {\n            var ctx = new __WEBPACK_IMPORTED_MODULE_2__lib_ctx_store__[\"a\" /* default */]();\n            if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__extrude__[\"a\" /* default */])(ctx, localState)) {\n                var data = {\n                    width: localState.width,\n                    height: localState.height,\n                    operations: ctx.operations\n                };\n                fetch('/pdf', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(data)\n                }).then(function (response) {\n                    return response.blob();\n                }).then(function (blob) {\n                    window.location = URL.createObjectURL(blob);\n                });\n                // exportPDF.href = offScreen.toDataURL('image/png');\n            }\n        }\n    });\n}\n\nfunction install(fonts) {\n    var sidebar = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"b\" /* createElement */])('div', { class: 'tool-box' });\n    var fontBox = wrapTool('font', fontTool, fonts);\n    var textBox = wrapTool('text', textTool);\n    var exportBox = wrapTool('export', exportTool);\n    // const xyBox = wrapTool('xy', xyTool);\n    // const extentBox = wrapTool('size', extentTool);\n\n\n    [textBox, fontBox, exportBox].forEach(function (box) {\n        return sidebar.appendChild(box);\n    });\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__lib_dom__[\"c\" /* body */])().appendChild(sidebar);\n    // body().appendChild(xyBox);\n    // body().appendChild(extentBox);\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./tools.js\n// module id = ./tools.js\n// module chunks = 0\n\n//# sourceURL=webpack:///./tools.js?");

/***/ })

})